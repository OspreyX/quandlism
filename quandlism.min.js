(function(e){(function(){var t,n,r,i,s,o,u,a,f,l,c,h=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=e.quandlism={version:"0.5.2"},i.context=function(){var e,n,r,i,s,o,a,f,l,c,h,p,d,v=this;return n=new t,d=null,l=null,r=null,o=null,i=null,s=null,a=null,h=0,p=.75,f=d3.dispatch("respond","adjust","toggle","refresh"),e=["#e88033","#4eb15d","#c45199","#6698cb","#6c904c","#e9563b","#9b506f","#d2c761","#4166b0","#44b1ae"],c=[],n.attachData=function(t){var r,u,a,f;n.addColorsIfNecessary(t);for(r=a=0,f=t.length;a<f;r=++a)u=t[r],u.color(e[r]);return c=t,o&&d3.select(o).datum(c),i&&d3.select(i).datum(c),s&&d3.select(s).datum(c),n},n.render=function(){return o&&d3.select(o).call(n.stage()),i&&d3.select(i).call(n.brush()),s&&d3.select(s).call(n.legend()),n},n.build=function(){return d=$(r).width(),l=$(r).height(),n},n.setupWithContainer=function(e,t){var s,a,f;if(!e.length)throw"Invalid container";return s=t!=null?t:!0,e.children().remove(),e.attr("id")==null&&e.attr("id","quandlism-"+ ++u),r="#"+e.attr("id"),f="quandlism-stage-"+ ++u,e.append("<div class='stage' id='"+f+"'></div>"),o="#"+f,s&&(a="quandlism-brush-"+ ++u,e.append("<div class='brush' id='"+a+"'></div>"),i="#"+a),n},n.legendWithSelector=function(e){if(!e.length)throw"Invalid container";return e.attr("id")||e.attr("id","quandlism-legend-"+ ++u),s="#"+e.attr("id"),n},n.addColorsIfNecessary=function(t){var n,r,i,s;r=t.length-e.length;if(r<0)return;n=.1,i=0;while(i<r)s=d3.rgb(e[i]).brighter(n),e.push(s.toString()),i++},n.lines=function(e){return e?(c=e,n):c},n.colorList=function(t){return t==null?e:(e=t,n)},n.startPoint=function(e){return e==null?p:(p=e,n)},n.w=function(e){return e==null?d:(d=e,n)},n.h=function(e){return e==null?l:(l=e,n)},n.dom=function(e){return e==null?r:(r=e,n)},n.domstage=function(e){return e==null?o:(o=e,n)},n.dombrush=function(e){return e==null?i:(i=e,n)},n.domlegend=function(e){return e==null?s:(s=e,n)},n.padding=function(e){return e==null?h:(h=e,n)},n.respond=_.throttle(function(){return f.respond.call(n,500)}),n.adjust=function(e,t){return f.adjust.call(n,e,t)},n.toggle=function(){return f.toggle.call(n)},n.refresh=function(){return f.refresh.call(n)},n.on=function(e,t){return t==null?f.on(e):(f.on(e,t),n)},d3.select(window).on("resize",function(){var e,t;d3.event.preventDefault();if(r){t=$(r).width(),e=$(r).height();if(d!==t||l!==e)d=t,l=e,n.respond()}}),n},t=function(){function e(){}return e}(),n=t.prototype=i.context.prototype,s=0,a=0,u=0,c=40,l={h:.1},o={h:.15},f={h:.65},r=function(){function e(){}return e}(),n.line=function(e){var t,n,i,s,o,u,f,l=this;return s=new r,n=this,o=e.name,u=e.values.reverse(),i=a++,f=!0,t="#000000",s.extent=function(e,t){var n,r,i,s,o;n=e!=null?e:0,s=t!=null?t:this.length()-1,i=Infinity,r=-Infinity;if(!this.visible())return[i,r];while(n<=s){o=this.valueAt(n);if(o==null){n++;continue}o<i&&(i=o),o>r&&(r=o),n++}return[i,r]},s.extentByDate=function(e,t){var n,r,i,s,o,u,a,f;s=Infinity,i=-Infinity;if(!this.visible())return[s,i];f=this.dates();for(r=u=0,a=f.length;u<a;r=++u){n=f[r];if(!(n<=t&&n>=e))continue;o=this.valueAt(r),o<s&&(s=o),o>i&&(i=o)}return[s,i]},s.dates=function(e,t){var n,r,i,s,o;s=u.slice(e,t+1||9e9),o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(n.date);return o},s.length=function(){return u.length},s.valueAt=function(e){return u[e]!=null?u[e].num:null},s.dateAt=function(e){return u[e]!=null?u[e].date:null},s.drawPoint=function(e,t,n,r,i){if(this.visible()){if(this.valueAt(r)==null)return;return e.beginPath(),e.arc(t(r),n(this.valueAt(r)),i,0,Math.PI*2,!0),e.fillStyle=this.color(),e.fill(),e.closePath()}},s.drawPath=function(e,t,n,r,i,s,o){var u,a,f,l,c;o=o!=null?o:!1;if(this.visible()){e.beginPath(),c=this.dates();for(a=f=0,l=c.length;f<l;a=++f){u=c[a];if(!(u<=i&&u>=r))continue;e.lineTo(t(u),n(this.valueAt(a)))}return e.lineWidth=s,e.strokeStyle=this.color(),e.stroke(),e.closePath()}},s.toggle=function(){var e;return e=!this.visible(),this.visible(e),e},s.id=function(e){return e==null?i:(i=e,s)},s.name=function(e){return e==null?o:(o=e,s)},s.values=function(e){return e==null?u:(u=e,s)},s.visible=function(e){return e==null?f:(f=e,s)},s.color=function(e){return e==null?t:(t=e,s)},s},n.timeScale=function(){var e,t;return e=this,t=d3.time.scale()},n.stage=function(){var e,t,n,r,i,s,o,a,h,p,d,v,m,g,y,b,w,E,S,x=this;return n=this,t=null,v=[],d=null,y=Math.floor(n.w()-c-2),p=Math.floor(n.h()*f.h),w=d3.scale.linear(),S=d3.scale.linear(),b=d3.svg.axis().orient("bottom").scale(w),E=d3.svg.axis().orient("left").scale(S),h=[],s=null,i=null,a=null,o=null,g=10,e=null,r=null,m=function(o){var a,m,x,T,N,C,k,L,A;t==null&&(t="canvas-stage-"+ ++u),v=o.datum(),d=_.first(v),o.attr("style","position: absolute; left: 0px; top: 0px;"),A=o.insert("svg"),A.attr("class","y axis"),A.attr("id","y-axis-"+t),A.attr("width",c),A.attr("height",Math.floor(n.h()*f.h)),A.attr("style","position: absolute; left: 0px; top: 0px;"),e=o.append("canvas"),e.attr("width",y),e.attr("height",p),e.attr("class","stage"),e.attr("id",t),e.attr("style","position: absolute; left: "+c+"px; top: 0px;"),r=e.node().getContext("2d"),L=o.append("svg"),L.attr("class","x axis"),L.attr("id","x-axis-"+t),L.attr("width",Math.floor(n.w()-c)),L.attr("height",Math.floor(n.h()*l.h)),L.attr("style","position: absolute; left: "+c+"px; top: "+n.h()*f.h+"px"),E.tickSize(5,3,0),b.tickSize(5,3,0),k=function(){var e;h=n.utility().getExtentFromDates(v,s,i),h[0]===h[1]&&(h=n.utility().getExtent(v,0,d.length())),S.domain([h[0],h[1]]),S.range([p-n.padding(),n.padding()]),w.domain([s,i]),w.range([n.padding(),y-n.padding()]),E.tickSize(5,3,0),E.ticks(Math.floor(n.h()*f.h/30)),e=n.utility().getUnitAndDivisor(Math.round(h[1])),E.tickFormat(function(t){var n;return n=(t/e.divisor).toFixed(2),n=n.replace(/0+$/,""),n=n.replace(/\.$/,""),""+n+" "+e.label})},x=function(){var e,t;A.selectAll("*").remove(),t=A.append("g"),t.attr("transform","translate("+(c-1)+", 0)"),t.call(E),L.selectAll("*").remove(),e=L.append("g"),e.call(b)},T=function(){var e,t,i,s,o,u,a,l,h;a=S.ticks(Math.floor(n.h()*f.h/30));for(i=0,o=a.length;i<o;i++)t=a[i],r.beginPath(),r.strokeStyle="#EDEDED",r.lineWidth=1,r.moveTo(0,Math.floor(S(t))),r.lineTo(y,Math.floor(S(t))),r.stroke(),r.closePath();l=w.ticks(Math.floor((n.w()-c)/100)),h=[];for(s=0,u=l.length;s<u;s++)e=l[s],r.beginPath(),r.strokeStyle="#EDEDED",r.lineWith=1,r.moveTo(w(e),p),r.lineTo(w(e),0),r.stroke(),h.push(r.closePath());return h},m=function(e){var t,n,o,u;x(),r.clearRect(0,0,y,p),T(),e=e!=null?e:-1,console.log("DRAWING: "+s+" "+i);for(t=o=0,u=v.length;o<u;t=++o)d=v[t],n=t===e?3:1.5,d.drawPath(r,w,S,s,i,n)},C=function(e){var t,i,s,o,u,a,f,l,c,h,p,d,m,g;t=n.utility().getPixelRGB(e,r),s=_.indexOf(n.colorList(),t);if(s!==-1)return{x:e[0],color:t,line:v[s]};i=[];for(o=f=h=e[0]-3,p=e[0]+3;h<=p?f<=p:f>=p;o=h<=p?++f:--f)for(u=l=d=e[1]-3,m=e[1]+3;d<=m?l<=m:l>=m;u=d<=m?++l:--l)(o!==e[0]||u!==e[1])&&i.push([o,u]);for(a=c=0,g=i.length-1;0<=g?c<=g:c>=g;a=0<=g?++c:--c){t=n.utility().getPixelRGB(i[a],r),s=_.indexOf(n.colorList(),t);if(s!==-1)return{x:i[a][0],color:t,line:v[s]}}return!1},N=function(e,t,i,s){var o,u,a,f,l,c;o=new Date(i.dateAt(t)),l=i.valueAt(t),m(i.id()),a=xEnd-xStart<=g?5:3,i.drawPoint(r,w,S,t,a),u=e[1]<=20&&e[0]>=y-250,c=u?y-400:y,r.beginPath(),r.fillStyle="rgba(237, 237, 237, 0.80)",r.fillRect(c-240,0,240,15),r.closePath(),r.fillStyle="#000",r.textAlign="start",f=""+n.utility().getMonthName(o.getUTCMonth())+"  "+o.getUTCDate()+", "+o.getFullYear()+": ",f+=""+n.utility().formatNumberAsString(l.toFixed(2)),r.fillText(f,c-110,10,100),r.fillStyle=i.color(),r.textAlign="end",r.fillText(""+n.utility().truncate(i.name(),20),c-120,10,200)},a=function(){m()},n.dombrush()==null&&(s=_.first(v[0].dates()),i=_.last(v[0].dates()),k(),m()),n.on("respond.stage",function(){r.clearRect(0,0,y,p),y=Math.floor(n.w()-c-1),p=Math.floor(n.h()*f.h),e.attr("width",y),e.attr("height",p),A.attr("width",c),L.attr("width",Math.floor(n.w()-c)),k(),m()}),n.on("adjust.stage",function(e,t){s=e,i=t,k(),m()}),n.on("toggle.stage",function(){k(),m()}),n.on("refresh.stage",function(){v=o.datum(),d=_.first(v),n.dombrush()||m()}),d3.select("#"+t).on("mousemove",function(e){var t,n;return})},m.canvasId=function(e){return e==null?t:(t=e,m)},m.xScale=function(e){return e==null?w:(w=e,m)},m.yScale=function(e){return e==null?S:(S=e,m)},m.threshold=function(e){return e==null?g:(g=e,m)},m},n.brush=function(){var e,t,n,r,i,s,a,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H,B=this;return s=this,E=Math.floor(s.h()*o.h),M=Math.floor(s.w()-c),w=10,d=null,p=null,y=null,g=null,P=d3.time.scale(),H=d3.scale.linear(),r=null,a=null,D=d3.svg.axis().orient("bottom").scale(P),i=null,b=[],x=[],L=10,m=!1,v=!0,k=!1,N=6,C=0,e=0,A=null,h={move:"move",resize:"resize"},n=document.createElement("canvas"),O=!1,T={},S=null,t=function(t){var b,C,B,j,F,I,q,R,U,z,W,X,V,J,K,Q,G,Y,Z,et;return i==null&&(i="canvas-brush-"+ ++u),x=t.datum(),S=_.first(x),d=_.first(S.dates()),p=_.last(S.dates()),t.attr("style","position: absolute; top: "+s.h()*(f.h+l.h)+"px; left: "+c+"px"),r=t.append("canvas"),r.attr("id",i),r.attr("style","position: absolute; left: 0px; top: 0px"),a=r.node().getContext("2d"),et=t.append("svg"),et.attr("class","x axis"),et.attr("id","x-axis-"+i),et.attr("height",Math.floor(s.h()*l.h)),et.attr("width",Math.floor(s.w()-c)),et.attr("style","position: absolute; top: "+s.h()*o.h+"px; left: 0px"),C=function(){return S.length()<=N?(d=_.first(S.dates()),p=_.last(S.dates()),y=P(d),g=P(p),v=!1):v=!0},Y=function(){var e;H.domain(s.utility().getExtent(x,null,null)),H.range([E-s.padding(),s.padding()]),P.range([s.padding(),M-s.padding()]),P.domain([_.first(S.dates()),_.last(S.dates())]),e=2},Q=function(){d=S.dateAt(Math.floor(s.startPoint()*S.length())),p=_.last(S.dates()),y=P(d),g=P(p),G("dateStart",d),G("dateEnd",p),G("drawStart",y),G("drawEnd",g)},Z=function(){B(),O?R():F(),q()},B=function(){a.clearRect(0,0,U("width"),U("height")),r.attr("width",M).attr("height",E)},I=function(){var e;et.selectAll("*").remove(),e=et.append("g"),e.call(D)},F=function(){var e,t,n,r;t=S.length()<=L;for(e=n=0,r=x.length;n<r;e=++n)S=x[e],S.drawPath(a,P,H,_.first(S.dates()),_.last(S.dates()),1,!0),t&&S.drawPoint(a,P,H,e,2);J()},R=function(){a.drawImage(n.canvas,0,0)},J=function(){O=!0,n.setAttribute("width",M),n.setAttribute("height",E),n=n.getContext("2d"),n.drawImage(document.getElementById(i),0,0)},q=function(){a.strokeStyle="rgba(237, 237, 237, 0.80)",a.beginPath(),a.fillStyle="rgba(237, 237, 237, 0.80)",a.fillRect(y,0,g-y,E),a.closePath(),a.beginPath(),a.fillStyle="#D9D9D9",a.fillRect(y-w,0,w,E),a.closePath(),a.beginPath(),a.fillStyle="#D9D9D9",a.fillRect(g,0,w,E),a.closePath()},V=function(){n=document.createElement("canvas"),O=!1},j=function(e){e=e!=null?e:!1,e&&(d=P.invert(y),p=P.invert(g)),s.adjust(d,p)},K=function(){m=!1,k=!1,e=0,d=P.invert(y),p=P.invert(g),G("drawStart",y),G("dateStart",d),G("drawEnd",g),G("dateEnd",p)},z=function(e){return e<=g&&e>=y},W=function(e){return e>=y-w&&e<y},X=function(e){return e>g&&e<=g+w},b=function(e){var t,n;t=function(){var e;e=[];for(n in h)e.push(n);return e}().reduce(function(e,t){return""+e+" "+t}),$(s.dombrush()).removeClass(t).addClass(e)},G=function(e,t){T[e]=t},U=function(e){var t;return(t=T[e])!=null?t:null},G("width",M),G("height",E),Y(),C(),v&&Q(),I(),j(),setInterval(Z,70),s.on("respond.brush",function(){G("height",E),G("width",M),E=Math.floor(s.h()*o.h),M=Math.floor(s.w()-c),V(),Y(),y=P(d),g=P(p),K(),et.attr("width",M),I()}),s.on("refresh.brush",function(){x=t.datum(),S=_.first(x),V(),Y(),C(),v&&Q(),I(),j()}),s.on("toggle.brush",function(){V(),Y()}),r.on("mousedown",function(t){var n;d3.event.preventDefault(),n=d3.mouse(this),A=n[0],W(n[0])?(k=!0,e=-1):X(n[0])?(k=!0,e=1):z(n[0])&&(m=!0)}),r.on("mouseup",function(e){K()}),r.on("mouseout",function(e){K()}),r.on("mousemove",function(t){var n,r;r=d3.mouse(this);if(m||k){n=r[0]-A;if(m&&v)y=U("drawStart")+n,g=U("drawEnd")+n;else if(k){if(e!==0&&e!==-1&&e!==1)throw"Error: Unknown stretching direction";e===-1&&(y=U("drawStart")+n),e===1&&(g=U("drawEnd")+n)}j(!0)}else v&&(z(r[0])?b(h.move):W(r[0])||X(r[0])?b(h.resize):b(""))})},t.canvasId=function(e){return e==null?i:(i=e,t)},t.xScale=function(e){return e==null?P:(P=e,t)},t.yScale=function(e){return e==null?H:(H=e,t)},t.threshold=function(e){return e==null?L:(L=e,t)},t.stretchLimit=function(e){return e==null?N:(N=e,t)},t.handleWidth=function(e){return e==null?w:(w=e,t)},t.cursorClasses=function(e){return e==null?h:(h=e,t)},t},n.xaxis=function(){var e,t,n,r,i,s,o,u,a,f,c,h=this;return n=this,f=n.w()*l.w,i=n.h()*l.h,a=d3.time.scale().range([0,f]),t=d3.svg.axis().scale(a),r=[],e=!1,o=[],s=null,u=null,c=function(h){var p,d;s=h.attr("id"),o=h.datum(),t.tickSize(5,3,0),d=function(){var e;return c.remove(),e=h.append("svg"),e.attr("width",f),e.attr("height",i),e.append("g"),e.attr("transform","translate(0, 27)"),e.call(t)},p=function(){return r=[o[0].dateAt(0),o[0].dateAt(o[0].length()-1)],u=n.utility().parseDate(o[0].dateAt(0)),a.domain([u(r[0]),u(r[1])]),t.tickFormat(d3.time.format("%b %d, %Y")),t.ticks(Math.floor(f/150,0,0)),a.range([0,f])},p(),d(),n.on("respond.xaxis-"+s,function(){return f=n.w()*l.w,t.ticks(Math.floor(f/150,0,0)),a.range([0,f]),d()}),n.on("refresh.xaxis-"+s,function(){return o=h.datum(),p(),d()}),e&&n.on("adjust.xaxis-"+s,function(e,t){return t=t>o[0].length()-1?o[0].length()-1:t,e=e<0?0:e,r=[o[0].dateAt(e),o[0].dateAt(t)],a.domain([u(r[0]),u(r[1])]),d()})},c.remove=function(){return d3.select("#"+s).selectAll("svg").remove()},c.active=function(t){return t?(e=t,c):e},d3.rebind(c,t,"orient","ticks","ticksSubdivide","tickSize","tickPadding","tickFormat")},n.yaxis=function(){var e,t,n,r,i,s,o,u,a,f,l,c=this;return t=this,u=t.w()*quandlism_yaxis.w,r=t.h()*quandlism_yaxis.h,o=d3.scale.linear().range([r,0]),e=d3.svg.axis().scale(o),s=[],n=[],f=null,a=null,i=null,l=function(c){var h,p;i=c.attr("id"),s=c.datum(),e.ticks(Math.floor(r/25,0,0)),e.tickSize(5,3,0),p=function(){var i,h;return n=t.utility().getExtent(s,f,a),o.domain([n[0],n[1]]),l.remove(),h=c.append("svg"),h.attr("width",u),h.attr("height","100%"),i=h.append("g"),i.attr("transform","translate("+(u-1)+", 0)"),i.attr("width",u),i.attr("height",r),i.call(e)},h=function(){a=s[0].length()-1,f=Math.floor(s[0].length()*t.endPercent())},h(),p(),t.on("toggle.y-axis-"+i,function(){p()}),t.on("refresh.y-axis-"+i,function(){s=c.datum(),h(),p()}),t.on("respond.y-axis-"+i,function(){u=t.w()*quandlism_yaxis.w,r=t.h()*quandlism_yaxis.h,e.ticks(Math.floor(r/25,0,0)),o.range([r,0]),p()}),t.on("adjust.y-axis-"+i+"}",function(e,t){f=e>0?e:0,a=t<s[0].length()?t:s[0].length(),p()})},l.remove=function(e){d3.select("#"+i).selectAll("svg").remove()},d3.rebind(l,e,"orient","ticks","ticksSubdivide","tickSize","tickPadding","tickFormat")},n.legend=function(){var e,t,n;return e=this,n=[],t=function(t){var r;r=function(){var r=this;n=t.datum(),t.selectAll("li").remove(),t.selectAll("li").data(n).enter().append("li").attr("style",function(e){return"color: "+e.color()}).attr("class",function(e){if(!e.visible())return"off"}).append("a",":first-child").attr("href","javascript:;").attr("data-line-id",function(e){return e.id()}).text(function(e){return e.name()}),t.selectAll("a").on("click",function(t,r){var i,s,o,u;i=d3.event,s=i.target,o=parseInt(s.getAttribute("data-line-id")),i.preventDefault(),u=_.find(n,function(e){return e.id()===o}),u!=null&&(u.toggle()===!1?$(s).parent().addClass("off"):$(s).parent().removeClass("off"),e.toggle())})},r(),e.on("refresh.legend",function(){r()})},t},n.utility=function(){var e,t,n=this;return e=this,t=function(){},t.truncate=function(e,t){return e.length>t?""+e.substring(0,t)+"...":e},t.createLines=function(n){var r,i,s,o,u,a,f,l;if(!e.lines().length){s=n.columns.slice(1),u=_.map(s,function(e,r){return t.getLineData(n.data,r)}),r=t.defaultColumn(n.code),a=_.map(s,function(t,n){return e.line({name:t,values:u[n]})});for(i=f=0,l=a.length;f<l;i=++f)o=a[i],i!==r&&o.visible(!1)}else a=t.mergeLines(e.lines(),n);return a},t.getLineData=function(e,t){var n;return n=d3.time.format("%Y-%m-%d"),_.map(e,function(e){return{date:n.parse(e[0]),num:e[t+1]}})},t.mergeLines=function(e,n){return e=t.addNewLinesAndRefresh(e,n),e=t.removeStaleLines(e,n.columns),e[0]!=null&&!_.find(e,function(e){return e.visible()===!0})&&e[0].visible(!0),e},t.addNewLinesAndRefresh=function(n,r){var i,s,o,u,a,f,l,c,h,p,d;d=r.columns.slice(1);for(s=l=0,h=d.length;l<h;s=++l){i=d[s],o=!1,f=t.getLineData(r.data,s);for(u=c=0,p=n.length;c<p;u=++c){a=n[u];if(a.name()===i){o=!0,n[u].values(f.reverse());break}}o||(a=e.line({name:i,values:f}),a.visible(!1),n.push(a))}return n},t.removeStaleLines=function(e,t){return _.reject(e,function(e){var n;return n=e.name(),h.call(t,n)<0})},t.defaultColumn=function(e){return e==null?0:e.match(/^FUTURE_/)?3:0},t.getExtent=function(e,t,n){var r,i;return r=function(){var r,s,o;o=[];for(r=0,s=e.length;r<s;r++)i=e[r],o.push(i.extent(t,n));return o}(),[d3.min(r,function(e){return e[0]}),d3.max(r,function(e){return e[1]})]},t.getExtentFromDates=function(e,t,n){var r,i;return r=function(){var r,s,o;o=[];for(r=0,s=e.length;r<s;r++)i=e[r],o.push(i.extentByDate(t,n));return o}(),[d3.min(r,function(e){return e[0]}),d3.max(r,function(e){return e[1]})]},t.getMonthName=function(e){var t;return t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t[e]},t.getColor=function(t){return e.colorList()[t]},t.formatNumberAsString=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.getPixelRGB=function(e,t){var n,r;return n=t.getImageData(e[0],e[1],1,1).data,r=d3.rgb(n[0],n[1],n[2]),r.toString()},t.getUnitAndDivisor=function(e){var t;return t=e.toString().length,t<=3?{label:"",divisor:1}:t<=6?{label:"K",divisor:1e3}:t<=9?{label:"M",divisor:1e6}:{label:"B",divisor:1e9}},t.dateFormat=function(e){var t,n;n=e.split("-").length-1;switch(n){case-1:t="%Y";break;case 2:t="%Y-%m-%d";break;default:throw"Unknown date format: "+n+" "+e}return t},t.parseDate=function(e){var t;return t=this.dateFormat(e),d3.time.format(t).parse},t}}).call(this)})(this);